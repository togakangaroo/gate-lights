<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acrylic Rod Lighting Simulator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: #d3d3d3;
            color: #333;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        h1 {
            margin-bottom: 20px;
            font-size: 24px;
        }

        .info {
            margin-bottom: 20px;
            text-align: center;
            color: #666;
            font-size: 14px;
        }

        .simulator-container {
            background: #e8e8e8;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .rods-container {
            display: flex;
            align-items: flex-end;
            gap: 60px; /* 6 inches * 10px per inch = 60px */
            padding: 20px;
            background: #f5f5f5;
            border-radius: 4px;
        }

        .rod-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .rod {
            width: 16px; /* 5px looks more accurate, but this is a better visualization */
            height: 600px; /* 5 feet * 12 inches/foot * 10px per inch = 600px */
            background: transparent;
            border: 1px solid #000;
            border-radius: 2px;
            box-shadow: none;
            transition: all 0.3s ease;
        }

        .rod:hover {
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        }

        .led-checkbox {
            width: 16px;
            height: 16px;
            cursor: pointer;
        }

        .checkbox-label {
            font-size: 10px;
            color: #666;
            user-select: none;
        }

        .specs {
            margin-top: 10px;
            padding: 10px;
            background: #f5f5f5;
            border-radius: 4px;
            font-size: 12px;
            color: #666;
        }

        .control-panel {
            margin-top: 30px;
            padding: 20px;
            background: #e8e8e8;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .control-panel h2 {
            font-size: 18px;
            margin-bottom: 15px;
            color: #333;
        }

        .pattern-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .pattern-option {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }

        .pattern-option input[type="radio"] {
            cursor: pointer;
        }

        .pattern-option label {
            cursor: pointer;
            user-select: none;
        }
    </style>
</head>
<body>
    <h1>Acrylic Rod Lighting Simulator</h1>

    <div class="info">
        <p style="max-width: 600px; margin: 0 auto 15px; line-height: 1.5;">
            This simulator represents an art installation featuring vertical acrylic rods with LED lights at each end.
            Use the checkboxes to toggle lights on and off, experimenting with different patterns to visualize how the illuminated rods will look in the final display.
        </p>
        <div>6 acrylic rods: 5ft tall Ã— 0.5" wide, spaced 6" apart</div>
        <div class="specs">Scale: 10px = 1 inch</div>
    </div>

    <div class="simulator-container">
        <div class="rods-container" id="rodsContainer">
            <div class="rod-wrapper">
                <input type="checkbox" class="led-checkbox" data-light="1" data-rod="1" data-end="top" id="led-1">
                <div class="rod" data-rod="1"></div>
                <input type="checkbox" class="led-checkbox" data-light="7" data-rod="1" data-end="bottom" id="led-7">
            </div>
            <div class="rod-wrapper">
                <input type="checkbox" class="led-checkbox" data-light="2" data-rod="2" data-end="top" id="led-2">
                <div class="rod" data-rod="2"></div>
                <input type="checkbox" class="led-checkbox" data-light="8" data-rod="2" data-end="bottom" id="led-8">
            </div>
            <div class="rod-wrapper">
                <input type="checkbox" class="led-checkbox" data-light="3" data-rod="3" data-end="top" id="led-3">
                <div class="rod" data-rod="3"></div>
                <input type="checkbox" class="led-checkbox" data-light="9" data-rod="3" data-end="bottom" id="led-9">
            </div>
            <div class="rod-wrapper">
                <input type="checkbox" class="led-checkbox" data-light="4" data-rod="4" data-end="top" id="led-4">
                <div class="rod" data-rod="4"></div>
                <input type="checkbox" class="led-checkbox" data-light="10" data-rod="4" data-end="bottom" id="led-10">
            </div>
            <div class="rod-wrapper">
                <input type="checkbox" class="led-checkbox" data-light="5" data-rod="5" data-end="top" id="led-5">
                <div class="rod" data-rod="5"></div>
                <input type="checkbox" class="led-checkbox" data-light="11" data-rod="5" data-end="bottom" id="led-11">
            </div>
            <div class="rod-wrapper">
                <input type="checkbox" class="led-checkbox" data-light="6" data-rod="6" data-end="top" id="led-6">
                <div class="rod" data-rod="6"></div>
                <input type="checkbox" class="led-checkbox" data-light="12" data-rod="6" data-end="bottom" id="led-12">
            </div>
        </div>
    </div>

    <div class="control-panel">
        <h2>Patterns</h2>
        <div class="pattern-options">
            <div class="pattern-option">
                <input type="radio" id="pattern-none" name="pattern" value="none" checked>
                <label for="pattern-none">None</label>
            </div>
            <div class="pattern-option">
                <input type="radio" id="pattern-bounce" name="pattern" value="bounce">
                <label for="pattern-bounce">Bounce</label>
            </div>
            <div class="pattern-option">
                <input type="radio" id="pattern-random" name="pattern" value="random">
                <label for="pattern-random">Random</label>
            </div>
            <div class="pattern-option">
                <input type="radio" id="pattern-wave" name="pattern" value="wave">
                <label for="pattern-wave">Wave</label>
            </div>
        </div>
    </div>

    <script>
        const rods = document.querySelectorAll('.rod');
        const ledCheckboxes = document.querySelectorAll('.led-checkbox');

        // Bright green LED color
        const LED_COLOR = { r: 0, g: 255, b: 0 };

        // Light state: tracks which lights are on
        const lightState = {};

        // Map light number to rod and end
        function getLightInfo(lightNumber) {
            // Lights 1-6 are top (rods 1-6)
            // Lights 7-12 are bottom (rods 1-6)
            if (lightNumber >= 1 && lightNumber <= 6) {
                return { rod: lightNumber, end: 'top' };
            } else if (lightNumber >= 7 && lightNumber <= 12) {
                return { rod: lightNumber - 6, end: 'bottom' };
            }
            return null;
        }

        // Toggle a light on or off
        function toggle(lightNumber, isOn) {
            lightState[lightNumber] = isOn;

            const info = getLightInfo(lightNumber);
            if (!info) return;

            const rodElement = document.querySelector(`.rod[data-rod="${info.rod}"]`);
            updateRodGradient(rodElement, info.rod);
        }

        function updateRodGradient(rodElement, rodNum) {
            // Find which lights are on for this rod
            const topLight = rodNum; // Lights 1-6
            const bottomLight = rodNum + 6; // Lights 7-12

            const topLit = lightState[topLight] || false;
            const bottomLit = lightState[bottomLight] || false;

            if (!topLit && !bottomLit) {
                // No LEDs lit - transparent
                rodElement.style.background = 'transparent';
            } else if (topLit && !bottomLit) {
                // Top LED lit - gradient from top (70% opacity) to bottom (0% opacity)
                rodElement.style.background = `linear-gradient(to bottom,
                    rgba(${LED_COLOR.r}, ${LED_COLOR.g}, ${LED_COLOR.b}, 0.7),
                    rgba(${LED_COLOR.r}, ${LED_COLOR.g}, ${LED_COLOR.b}, 0))`;
            } else if (!topLit && bottomLit) {
                // Bottom LED lit - gradient from bottom (70% opacity) to top (0% opacity)
                rodElement.style.background = `linear-gradient(to top,
                    rgba(${LED_COLOR.r}, ${LED_COLOR.g}, ${LED_COLOR.b}, 0.7),
                    rgba(${LED_COLOR.r}, ${LED_COLOR.g}, ${LED_COLOR.b}, 0))`;
            } else {
                // Both LEDs lit - bright at both ends, transparent in middle
                rodElement.style.background = `linear-gradient(to bottom,
                    rgba(${LED_COLOR.r}, ${LED_COLOR.g}, ${LED_COLOR.b}, 0.7) 0%,
                    rgba(${LED_COLOR.r}, ${LED_COLOR.g}, ${LED_COLOR.b}, 0.7) 100%)`;
            }
        }

        // Add event listeners to LED checkboxes
        ledCheckboxes.forEach(checkbox => {
            checkbox.addEventListener('change', (e) => {
                const lightNumber = parseInt(e.target.dataset.light);
                toggle(lightNumber, e.target.checked);
            });
        });

        // Initialize light state
        for (let i = 1; i <= 12; i++) {
            lightState[i] = false;
        }

        // Initialize all rod gradients
        rods.forEach(rod => {
            const rodNum = parseInt(rod.dataset.rod);
            updateRodGradient(rod, rodNum);
        });

        // Make toggle function available globally for testing/debugging
        window.toggle = toggle;

        // Pattern control
        let animationTimer = null;
        let bouncePosition = 0;
        let bounceDirection = 1; // 1 for right, -1 for left
        let wavePosition = 0;
        let waveDirection = 1; // 1 for right, -1 for left

        function clearAllLights() {
            for (let i = 1; i <= 12; i++) {
                toggle(i, false);
                const checkbox = document.querySelector(`#led-${i}`);
                if (checkbox) checkbox.checked = false;
            }
        }

        function stopAnimation() {
            if (animationTimer) {
                clearInterval(animationTimer);
                animationTimer = null;
            }
        }

        function bouncePattern() {
            // Clear all lights first
            clearAllLights();

            // Light up the bottom of the current rod (lights 7-12 are bottom)
            const lightNumber = 7 + bouncePosition;
            toggle(lightNumber, true);

            // Move to next position
            bouncePosition += bounceDirection;

            // Reverse direction at the ends
            if (bouncePosition >= 6) {
                bouncePosition = 4; // Second-to-last rod
                bounceDirection = -1;
            } else if (bouncePosition < 0) {
                bouncePosition = 1; // Second rod
                bounceDirection = 1;
            }
        }

        function randomPattern() {
            // Pick a random number of lights to turn on (0-12)
            const numLights = Math.floor(Math.random() * 13);

            // Clear all lights first
            clearAllLights();

            // Pick random lights to turn on
            if (numLights > 0) {
                // Create array of all light numbers [1-12]
                const allLights = Array.from({length: 12}, (_, i) => i + 1);

                // Shuffle and pick the first numLights
                for (let i = allLights.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [allLights[i], allLights[j]] = [allLights[j], allLights[i]];
                }

                // Turn on the randomly selected lights
                for (let i = 0; i < numLights; i++) {
                    toggle(allLights[i], true);
                }
            }
        }

        function wavePattern() {
            // Clear all lights first
            clearAllLights();

            // Rod numbering is 0-5 (representing rods 1-6)
            const centerRod = wavePosition;

            // Light up the center rod fully (both top and bottom)
            // Top LEDs are 1-6, bottom LEDs are 7-12
            const topLight = centerRod + 1;
            const bottomLight = centerRod + 7;
            toggle(topLight, true);
            toggle(bottomLight, true);

            // Light up left neighbor's bottom (if exists)
            if (centerRod > 0) {
                const leftBottomLight = centerRod + 6; // centerRod - 1 + 7
                toggle(leftBottomLight, true);
            }

            // Light up right neighbor's bottom (if exists)
            if (centerRod < 5) {
                const rightBottomLight = centerRod + 8; // centerRod + 1 + 7
                toggle(rightBottomLight, true);
            }

            // Move to next position
            wavePosition += waveDirection;

            // Reverse direction at the ends
            if (wavePosition >= 6) {
                wavePosition = 4; // Second-to-last rod
                waveDirection = -1;
            } else if (wavePosition < 0) {
                wavePosition = 1; // Second rod
                waveDirection = 1;
            }
        }

        // Event listeners for pattern radio buttons
        const patternRadios = document.querySelectorAll('input[name="pattern"]');
        patternRadios.forEach(radio => {
            radio.addEventListener('change', (e) => {
                stopAnimation();

                if (e.target.value === 'bounce') {
                    // Reset bounce position
                    bouncePosition = 0;
                    bounceDirection = 1;

                    // Start the bounce animation (500ms interval)
                    animationTimer = setInterval(bouncePattern, 500);
                } else if (e.target.value === 'random') {
                    // Start the random animation (1000ms interval)
                    animationTimer = setInterval(randomPattern, 1000);
                } else if (e.target.value === 'wave') {
                    // Reset wave position
                    wavePosition = 0;
                    waveDirection = 1;

                    // Start the wave animation (400ms interval)
                    animationTimer = setInterval(wavePattern, 400);
                } else if (e.target.value === 'none') {
                    // Just stop the animation, keep current light state
                }
            });
        });
    </script>
</body>
</html>
